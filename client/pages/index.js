import Head from 'next/head';
import Navbar from './components/Navbar';
import MoviesList from './components/MoviesList';
import Search from './components/Search';

export default function Home({ movies }) {
  return (
    <div className="h-screen bg-gray-800">
      <Head>
        <title>Trakt TV</title>
        <meta name="description" content="Generated by create next app" />
        <link rel="icon" href="/favicon.ico" />
      </Head>
      <header>
        <Navbar />
      </header>
      <main className="mx-auto">
        <Search />
        <MoviesList movies={movies} />
      </main>
    </div>
  );
}

export async function getStaticProps() {
  const res = await fetch('http://localhost:3000/movies');
  const data = await res.json();

  return {
    props: {
      movies: data,
    },
    // Next.js will attempt to re-generate the page:
    // - When a request comes in
    // - At most once every second
    revalidate: 1, // In seconds
  };
}
